@using OutlookInspired.Blazor.Server.Services
@inherits MapComponent<DxMapModel,DxMap>

<div @ref=@Element ></div>

@code {
    // static DxMap() => ExtractResource<DxMap>();
    

    private DotNetObjectReference<JsInterop> _itemSelected;
    private bool _initClientObject;

    protected override async Task OnAfterImportDevExtremeModuleAsync(bool firstRender){
        if (firstRender){
            ClientObject ??= await ClientModule.InvokeAsync<IJSObjectReference>("InitDxMap", Element, ComponentModel);    
        }
        var routeMode = ComponentModel.RouteMode;
        if (routeMode!=null){
            ComponentModel.RouteMode = null;
            await ClientModule.InvokeVoidAsync("SetRouteMode", ClientObject, routeMode);
        }
    }

    // protected override async Task OnAfterRenderClientModuleAsync(bool firstRender){
    //     await base.OnAfterRenderClientModuleAsync(firstRender);
    //     if (DevExtremeModule==null)return;
    //     
    //     
    // }

}
