@using OutlookInspired.Module.BusinessObjects
@using OutlookInspired.Blazor.Server.Features.Customers.GridView
@using OutlookInspired.Blazor.Server.Components
<DxGrid Data="Order.OrderItems" PageSizeSelectorVisible="true" PageSize="Order.OrderItems.Count" AllowSelectRowByClick="true" >
    <Columns>
        <DxGridDataColumn FieldName="@nameof(OrderItem.Product)"/>
        <DxGridDataColumn FieldName="@nameof(OrderItem.ProductUnits)" />
        <DxGridDataColumn FieldName="@nameof(OrderItem.ProductPrice)" />
        <DxGridDataColumn FieldName="@nameof(OrderItem.Discount)" />
        <DxGridDataColumn FieldName="@nameof(OrderItem.Total)" />
    </Columns>
    <TotalSummary>
        <DxGridSummaryItem SummaryType="GridSummaryItemType.Count" FieldName="@nameof(OrderItem.ProductUnits)" />
        <DxGridSummaryItem SummaryType="GridSummaryItemType.Sum" FieldName="@nameof(OrderItem.Discount)" />
        <DxGridSummaryItem SummaryType="GridSummaryItemType.Sum" FieldName="@nameof(OrderItem.Total)" />
    </TotalSummary>
</DxGrid>

@code {
    [Parameter]
    public List<OrderItem> OrderItems { get; set; }
    [Parameter]
    public GridDetailRowTemplateContext Context { get; set; }
    public Order Order => (Order)Context.DataItem;
    public static RenderFragment Create(GridDetailRowTemplateContext context) 
        => @<DetailRow Context=@context />;
}